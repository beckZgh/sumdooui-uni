@import '../styles/variables.scss'  ;

$loading-font-size: var(--sd-loading-font-size, $sd-font-size-base);
$loading-color: var(--sd-loading-color, $sd-gray-color-7);

.sd-loading {
    font-size: $loading-font-size;
    transform: translate3d(0, 0, 0);

    // 排列方式
    &--row {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;

        .sd-loading__circle,
        .sd-loading__line,
        .sd-loading__meet {
            margin: 0 20rpx;
        }
    }
    &--column {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        .sd-loading__circle,
        .sd-loading__line,
        .sd-loading__meet {
            margin-bottom: 24rpx;
        }
    }

    // 圆圈动画
    &__circle {
        width: 48rpx;
        height: 48rpx;
        border-width: 1px 1px 1px 0;
        border-style: solid;
        border-radius: 48rpx 48rpx 48rpx 0;
        animation: rotate 1s linear infinite;
        transform: translateZ(0);
        overflow: hidden;
        border-color: $loading-color $loading-color transparent transparent;
    }
    // 音符动画
    &__line {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        flex-wrap: nowrap;
        margin: 0 20rpx;

        &-rect {
            height: 40rpx;
            width: 4rpx;
            transform: translateZ(0);
            margin: 0 10rpx;
            animation: stretchdelay 1.2s infinite ease-in-out;
            background-color: $loading-color;

            &-2 {
                animation-delay: -1.1s;
            }
            &-3 {
                animation-delay: -1s;
            }
            &-4 {
                animation-delay: -0.9s;
            }
            &-5 {
                animation-delay: -0.8s;
            }
        }
    }
    &__meet {
        width: 120rpx;
        height: 120rpx;
        border-radius: 50%;
        border-top: 1px solid $loading-color;
        border-left: 1px solid transparent;
        border-right: 1px solid transparent;
        border-bottom: 1px solid $loading-color;
        transform: translateZ(0);
        animation: rotate 2s linear infinite;

        &::after {
            margin: auto;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 2;
            width: 0;
            height: 0;
            border-radius: 50%;
            border-top: initial;
            border-left: initial;
            border-right: initial;
            animation: scale 1s infinite;
            transform: translateZ(0);
            content: '';
            background-color: $loading-color;
        }
    }


    // 文本加载
    &__text {
        color: $loading-color;
        display: flex;
        height: 1em;
        line-height: 1;
        overflow: hidden;

        &::after {
            content: '...\A..\A.';
            display: inline-block;
            white-space: pre-wrap;
            animation: text 3s infinite step-start both;
            transform: translateZ(0);
        }
    }

    // Loading 场景
    &--auto {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 0;
    }
    &--page {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 0;
        opacity: 0;
        animation: fadeIn 0.3s;
        animation-fill-mode: forwards;
        transform: translate(0);

        .sd-loading__circle {
            width: 100rpx;
            height: 100rpx;
            border-radius: 100rpx 100rpx 100rpx 0rpx;
            margin-top: -120rpx;
            margin-bottom: 50rpx;
        }

        .sd-loading--page .sd-loading__text {
            font-size: 30rpx;
        }

        .sd-loading--page .sd-loading__meet {
            margin-top: -120rpx;
            margin-bottom: 50rpx;
        }
    }
}

